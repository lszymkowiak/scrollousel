/*!
 * scrollousel,  version: 0.3.0
 * http://lszymkowiak.com/scrollousel
 * Copyright 2015 ≈Åukasz Szymkowiak <dev@lszymkowiak.com>
 * Licensed under MIT (https://github.com/lszymkowiak/scrollousel/blob/master/LICENSE)
 */

!function(a,b,c){function d(b,c){this.element=b,this.settings=a.extend({},f,c,a(this.element).data()),this._defaults=f,this._name=e,this.vars={running:!1,timeout:null,width:0},this.init()}var e="scrollusel",f={autoplay:[0,"left",!0],align:"left",offset:0,speed:500,start:":first",width:"auto"};a.extend(d.prototype,{init:function(){var c=this;c.shift(),a(c.element).find(".prev").click(function(a){c.scroll("prev","last","insertBefore","first"),a.preventDefault()}),a(c.element).find(".next").click(function(a){c.scroll("next","first","insertAfter","last"),a.preventDefault()}),parseInt(c.settings.autoplay[0])>0&&c.settings.autoplay[2]===!0&&a(c.element).mouseenter(function(){clearTimeout(c.vars.timeout)}).mouseleave(function(){c.autoplay()}),a(b).resize(function(){c.adjust()}).load(function(){a(c.element).is(":hover")===!1&&c.autoplay()}),c.adjust()},shift:function(){var b,c,d,e,f=this;switch(c=a(f.element).find(".item"+f.settings.start).index()<0?0:a(f.element).find(".item"+f.settings.start).index(),e=a(f.element).find(".item").length,f.settings.align){case"right":b=1,d=e-2;break;case"center":b=Math.ceil(e/2),d=Math.floor(e/2-1);break;default:case"left":b=e-2,d=1}switch(c){case 0:break;case 1:b+=1;break;default:b=Math.abs(b-Math.abs(c-e))}a(f.element).find(".item:gt("+b+")").insertBefore(a(f.element).find(".item:first")),a(f.element).find(".item:eq("+d+")").addClass("active")},adjust:function(){var b=this,c=0,d=0;b.vars.width=a(b.element).width(),a(b.element).find(".item").each(function(){var e="full"==b.settings.width?b.vars.width:b.settings.width;a(this).css("width",e),e=a(this).width(),d=e>d?e:d,c+=e}),a(b.element).find(".pane").css("width",c+d),b.resetPosition()},getOffset:function(){var b=a(this.element).find(".item.active"),c=a(b).position().left,d=c;switch(this.settings.align){case"right":d-=this.vars.width-a(b).width();break;case"center":d-=this.vars.width/2-a(b).width()/2}return 0-d+this.settings.offset},resetPosition:function(){a(this.element).find(".pane").css("left",this.getOffset()+"px")},scroll:function(b,c,d,e){var f=this,g=a(this.element).find(".item.active");f.vars.running||(f.vars.running=!0,clearTimeout(f.vars.timeout),a(f.element).find(".item:"+c).clone()[d](a(f.element).find(".item:"+e)),f.resetPosition(),a(g)[b](".item").addClass("active"),a(g).removeClass("active"),a(g).find(".products.active").removeClass("active"),a(f.element).find(".pane").clearQueue().animate({left:this.getOffset()},f.settings.speed,function(){a(f.element).find(".item:"+c).remove(),f.resetPosition(),f.vars.running=!1,f.autoplay()}))},autoplay:function(){var a=this;parseInt(a.settings.autoplay[0])>0&&(a.vars.timeout=setTimeout(function(){"right"==a.settings.autoplay[1]?a.scroll("prev","last","insertBefore","first"):a.scroll("next","first","insertAfter","last")},a.settings.autoplay[0]))}}),a.fn[e]=function(b){return this.each(function(){a.data(this,"plugin_"+e)||a.data(this,"plugin_"+e,new d(this,b))}),this},a(c).ready(function(){a("."+e)[e]()})}(jQuery,window,document);