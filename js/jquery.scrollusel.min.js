/*!
 * Scrollousel v0.2.0
 * Copyright 2015 ≈Åukasz Szymkowiak <poczta@lszymkowiak.pl>
 * Licensed under MIT (http://rdev.pl/license/MIT)
 */

!function(a,b){function c(b,c){this.element=b,this.settings=a.extend({},e,a(this.element).data(),c),this._defaults=e,this._name=d,this.vars={running:!1,width:0},this.init()}var d="scrollusel",e={speed:500,start:":first",width:"auto",position:"left",offset:0};a.extend(c.prototype,{init:function(){var c=this;c.setStart(),a(c.element).find(".prev").click(function(a){c.scroll("prev","last","insertBefore","first"),a.preventDefault()}),a(c.element).find(".next").click(function(a){c.scroll("next","first","insertAfter","last"),a.preventDefault()}),a(c.element).on("click",".item .check",function(b){a(this).parents(".products").toggleClass("active"),b.preventDefault()}),a(b).resize(function(){c.generate()}),c.generate()},setStart:function(){var b,c,d,e,f=this;switch(c=a(f.element).find(".item"+f.settings.start).index()<0?0:a(f.element).find(".item"+f.settings.start).index(),e=a(f.element).find(".item").length,f.settings.position){case"left":b=e-2,d=1;break;case"right":b=1,d=e-2;break;case"center":b=Math.ceil(e/2),d=Math.floor(e/2-1)}switch(c){case 0:break;case 1:b+=1;break;default:b=Math.abs(b-Math.abs(c-e))}a(f.element).find(".item:gt("+b+")").insertBefore(a(f.element).find(".item:first")),a(f.element).find(".item:eq("+d+")").addClass("active")},generate:function(){var b=this,c=0,d=0;b.vars.width=a(b.element).width(),a(b.element).find(".item").each(function(){var e="full"==b.settings.width?b.vars.width:b.settings.width;a(this).css("width",e),e=a(this).width(),d=e>d?e:d,c+=e}),a(b.element).find(".pane").css("width",c+d),b.resetPosition()},getOffset:function(){var b=a(this.element).find(".item.active"),c=a(b).position().left,d=c;switch(this.settings.position){case"right":d-=this.vars.width-a(b).width();break;case"center":d-=this.vars.width/2-a(b).width()/2}return 0-d+this.settings.offset},resetPosition:function(){a(this.element).find(".pane").css("left",this.getOffset()+"px")},scroll:function(b,c,d,e){var f=this,g=a(this.element).find(".item.active");f.vars.running||(f.vars.running=!0,a(f.element).find(".item:"+c).clone()[d](a(f.element).find(".item:"+e)),f.resetPosition(),a(g)[b](".item").addClass("active"),a(g).removeClass("active"),a(g).find(".products.active").removeClass("active"),a(f.element).find(".pane").clearQueue().animate({left:this.getOffset()},f.settings.speed,function(){a(f.element).find(".item:"+c).remove(),f.resetPosition(),f.vars.running=!1}))}}),a.fn[d]=function(b){return this.each(function(){a.data(this,"plugin_"+d)||a.data(this,"plugin_"+d,new c(this,b))}),this}}(jQuery,window,document);