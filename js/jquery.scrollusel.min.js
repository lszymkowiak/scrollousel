/*!
 * scrollousel,  version: 0.3.0
 * http://lszymkowiak.com/scrollousel
 * Copyright 2015 ≈Åukasz Szymkowiak <dev@lszymkowiak.com>
 * Licensed under MIT (https://github.com/lszymkowiak/scrollousel/blob/master/LICENSE)
 */

!function(a,b){function c(b,c){this.element=b,this.settings=a.extend({},e,c,a(this.element).data()),this._defaults=e,this._name=d,this.vars={items:0,running:!1,timeout:null,width:0},this.init()}var d="scrollusel",e={autoplay:[0,"left",!0],align:"left",offset:0,speed:500,start:":first",width:"auto",width_xs:!1,width_sm:!1,width_md:!1,width_lg:!1,onInit:null};a.extend(c.prototype,{init:function(){var c=this;c.shift(),a(c.element).find(".prev").click(function(a){c.scroll("prev","last","insertBefore","first"),a.preventDefault()}),a(c.element).find(".next").click(function(a){c.scroll("next","first","insertAfter","last"),a.preventDefault()}),parseInt(c.settings.autoplay[0])>0&&c.settings.autoplay[2]===!0&&a(c.element).mouseenter(function(){clearTimeout(c.vars.timeout)}).mouseleave(function(){c.autoplay()}),a(b).resize(function(){c.adjust()}).load(function(){a(c.element).is(":hover")===!1&&c.autoplay()}),c.adjust()},shift:function(){var b,c,d,e=this;switch(c=a(e.element).find(".item"+e.settings.start).index()<0?0:a(e.element).find(".item"+e.settings.start).index(),e.vars.items=a(e.element).find(".item").length,e.settings.align){case"right":b=1,d=e.vars.items-2;break;case"center":b=Math.ceil(e.vars.items/2),d=Math.floor(e.vars.items/2-1);break;default:case"left":b=e.vars.items-2,d=1}switch(c){case 0:break;case 1:b+=1;break;default:b=Math.abs(b-Math.abs(c-e.vars.items))}a(e.element).find(".item:gt("+b+")").insertBefore(a(e.element).find(".item:first")),a(e.element).find(".item:eq("+d+")").addClass("active")},adjust:function(){var b=this,c=0,d=0,e=0;b.vars.width=a(b.element).width();var f=b.calculateWidth();a(b.element).find(".item").each(function(){a(this).css("width",f),e=a(this).width(),d=e>d?e:d,c+=e}),a(b.element).find(".pane").css("width",c+d),b.resetPosition()},calculateWidth:function(){var a=this,c=a.settings.width,d=b.innerWidth;return a.settings.width_xs&&d>=a.settings.width_xs[0]&&(c=a.settings.width_xs[1]),a.settings.width_sm&&d>=a.settings.width_sm[0]&&(c=a.settings.width_sm[1]),a.settings.width_md&&d>=a.settings.width_md[0]&&(c=a.settings.width_md[1]),a.settings.width_lg&&d>=a.settings.width_lg[0]&&(c=a.settings.width_lg[1]),"full"==c?c=a.vars.width:"%"===String(c).substr(c.length-1)&&(c=a.vars.width*parseInt(c)/100),c},getOffset:function(){var b=a(this.element).find(".item.active"),c=a(b).position().left,d=c;switch(this.settings.align){case"right":d-=this.vars.width-a(b).width();break;case"center":d-=this.vars.width/2-a(b).width()/2}return 0-d+("%"===String(this.settings.offset).substr(this.settings.offset.length-1)?parseInt(this.settings.offset)*this.vars.width/100:parseInt(this.settings.offset))},resetPosition:function(){a(this.element).find(".pane").css("left",this.getOffset()+"px")},scroll:function(b,c,d,e){var f=this,g=a(this.element).find(".item.active");f.vars.running||(f.vars.running=!0,clearTimeout(f.vars.timeout),a(f.element).find(".item:"+c).clone()[d](a(f.element).find(".item:"+e)),f.resetPosition(),a(g)[b]().addClass("active"),a(g).removeClass("active"),a(f.element).find(".pane").clearQueue().animate({left:this.getOffset()},f.settings.speed,function(){a(f.element).find(".item:"+c).remove(),f.resetPosition(),f.vars.running=!1,f.autoplay()}))},autoplay:function(){var a=this;parseInt(a.settings.autoplay[0])>0&&(a.vars.timeout=setTimeout(function(){"right"==a.settings.autoplay[1]?a.scroll("prev","last","insertBefore","first"):a.scroll("next","first","insertAfter","last")},a.settings.autoplay[0]))}}),a.fn[d]=function(b){return this.each(function(){a.data(this,"plugin_"+d)||a.data(this,"plugin_"+d,new c(this,b))}),this},a(b).load(function(){a("."+d)[d]()})}(jQuery,window,document);